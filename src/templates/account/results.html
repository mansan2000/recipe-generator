{% extends "base.html" %}

{% block content %}

<style>
  body {
    background-image: url("../../static/slider-image2.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  h2 {
    color: white;
  }
</style>

<div class="container mt-3">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" href="/generate-recipes">Generate Recipes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="/results">View Your Recipes</a>
    </li>
    <li class="nav-item ml-auto">
      <a class="nav-link" href="/logout">Logout</a>
    </li>
  </ul>
</div>

<!-- Section: Results Block -->
<section class="text-center text-lg-start">
  <div class="container py-4">
    <h2 class="fw-bold mb-3">Generated Recipes</h2>
    {% for title, recipe in recipes.items() %}
    <div class="card cascading-right mb-4" style="background: hsla(0, 0%, 100%, 0.55); backdrop-filter: blur(30px);">
      <div class="card-body p-3 shadow-5 text-center">
        <h3 class="fw-bold">{{ title }}</h3>
        <h4 class="fw-bold mb-3">Ingredients:</h4>
        <p>{{ recipe.Ingredients }}</p>
        <button class="btn btn-primary" onclick="saveRecipe(this)">Save Recipe</button>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<script>
  function saveRecipe(button) {
    // Get the card
    const card = button.closest('.card');

    // Hide the card
    card.style.display = 'none';

    // TODO: Add code to save the recipe to the database
    console.log("Need to save to the database:", card.querySelector('h3').innerText);
  }
</script>

{% endblock %}